<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Our Secret Channel</title>
<style>
    :root {
        --bg-color: #0d0d0d;
        --text-color: #00ff41;
        --border-color: #00ff41;
        --button-bg: #1a1a1a;
        --button-hover-bg: #00ff41;
        --button-hover-text: #0d0d0d;
    }
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100vh;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: 'Courier New', Courier, monospace;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .container {
        width: 90%;
        max-width: 800px;
        background-color: #000;
        border: 2px solid var(--border-color);
        box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        border-radius: 8px;
        padding: 25px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    h1 {
        text-align: center;
        margin: 0 0 10px 0;
        font-size: 1.5rem;
        text-shadow: 0 0 10px var(--border-color);
    }
    textarea {
        width: 100%;
        height: 150px;
        background-color: #111;
        border: 1px solid #333;
        color: var(--text-color);
        font-family: inherit;
        font-size: 1rem;
        padding: 10px;
        box-sizing: border-box;
        resize: vertical;
        border-radius: 4px;
    }
    textarea:focus {
        outline: none;
        border-color: var(--border-color);
        box-shadow: 0 0 8px rgba(0, 255, 65, 0.4);
    }
    .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
    }
    button {
        padding: 10px 20px;
        font-family: inherit;
        font-size: 1rem;
        font-weight: bold;
        background-color: var(--button-bg);
        color: var(--text-color);
        border: 2px solid var(--border-color);
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s, color 0.2s;
    }
    button:hover {
        background-color: var(--button-hover-bg);
        color: var(--button-hover-text);
    }
    .error {
        color: #ff4136;
        text-align: center;
        min-height: 1.2em;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Our Secret Channel</h1>
    
    <textarea id="plainText" placeholder="Tell me what you want to do..."></textarea>
    
    <div class="controls">
        <button id="encodeBtn">Encode ↓</button>
        <button id="decodeBtn">↑ Decode</button>
    </div>
    
    <textarea id="base64Text" placeholder="Secret message goes here..."></textarea>
    
    <p id="error-message" class="error"></p>
</div>

<script>
    const plainTextInput = document.getElementById('plainText');
    const base64TextInput = document.getElementById('base64Text');
    const encodeButton = document.getElementById('encodeBtn');
    const decodeButton = document.getElementById('decodeBtn');
    const errorMessage = document.getElementById('error-message');

    encodeButton.addEventListener('click', () => {
        errorMessage.textContent = '';
        try {
            const plainText = plainTextInput.value;
            if (plainText) {
                // Use a modern approach for UTF-8 compatibility
                const textEncoder = new TextEncoder();
                const utf8Bytes = textEncoder.encode(plainText);
                
                let binary = '';
                utf8Bytes.forEach(byte => {
                    binary += String.fromCharCode(byte);
                });

                base64TextInput.value = btoa(binary);
            }
        } catch (e) {
            errorMessage.textContent = 'Encoding error.';
            console.error(e);
        }
    });

    decodeButton.addEventListener('click', () => {
        errorMessage.textContent = '';
        try {
            const base64Text = base64TextInput.value.trim();
            if (base64Text) {
                // Use a modern approach for UTF-8 compatibility
                const binaryString = atob(base64Text);
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }

                const textDecoder = new TextDecoder();
                plainTextInput.value = textDecoder.decode(bytes);
            }
        } catch (e) {
            errorMessage.textContent = 'Invalid Base64 string. Decoding failed.';
            console.error(e);
        }
    });

</script>

</body>
</html>